<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D√©verrouillage s√©curis√© + QCM</title>

<style>
*{box-sizing:border-box}
body{
    margin:0;
    font-family:'Segoe UI',Tahoma,sans-serif;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
}

/* ===== Header ===== */
header{
    background:#2563eb;
    color:white;
    padding:15px 30px;
    width:100%;
    position:sticky;
    top:0;
    z-index:100;
}
header nav a{
    color:white;
    margin-right:15px;
    text-decoration:none;
    font-weight:500;
}
header nav a.active{text-decoration:underline}

/* ===== D√©verrouillage ===== */
#lock-screen{
    width:360px;
    padding:40px 30px;
    background:rgba(255,255,255,0.12);
    backdrop-filter:blur(12px);
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,0.4);
    text-align:center;
    color:#fff;
    margin-top:40px;
}
#lock-screen img{width:70px;margin-bottom:20px}
#lock-screen input{
    width:100%;
    padding:15px;
    border-radius:10px;
    border:none;
    margin-bottom:20px;
    font-size:16px;
    text-align:center;
    letter-spacing:4px;
}
#lock-screen button{
    width:100%;
    padding:14px;
    border:none;
    border-radius:10px;
    background:#00c6ff;
    font-weight:bold;
    cursor:pointer;
}
#lock-msg{margin-top:18px;height:18px}

/* ===== QCM ===== */
#quiz-screen{display:none}
.container{
    background:#fff;
    width:100%;
    max-width:800px;
    padding:30px;
    border-radius:16px;
    box-shadow:0 15px 40px rgba(0,0,0,.15);
    margin-top:40px;
}
.top-bar{display:flex;justify-content:space-between;margin-bottom:20px}
.timer{
    font-weight:bold;
    background:#e0e7ff;
    padding:6px 14px;
    border-radius:999px;
}
.question{
    font-size:24px;
    font-weight:700;
    margin-bottom:20px;
}
.option{
    width:100%;
    padding:14px;
    margin:10px 0;
    font-size:18px;
    border-radius:10px;
    cursor:pointer;
}
.correct{background:#dcfce7}
.wrong{background:#fee2e2}
#result{text-align:center;font-size:22px;font-weight:bold;margin-top:20px}
#restart{
    display:none;
    margin:20px auto 0;
    padding:12px 24px;
    border:none;
    border-radius:999px;
    background:#2563eb;
    color:white;
    cursor:pointer;
}
</style>
</head>

<body>

<header>
<nav>
    <a href="index.html">HOMEüë®üèΩ‚Äçüíª</a>
    <a href="cours.html">COURSüìñ</a>
    <a class="active" href="exo.html">EXAMENüìù</a>
    <a href="contact.html">contactüìû</a>
</nav>
</header>

<div id="lock-screen">
    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png">
    <h2>D√©verrouillage</h2>
    <input type="password" id="pin" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    <button id="btn" onclick="unlock()">D√©verrouiller</button>
    <div id="lock-msg"></div>
</div>

<div id="quiz-screen" class="container">
    <h1>QCM Cybers√©curit√©</h1>
    <div class="top-bar">
        <div id="progress"></div>
        <div class="timer" id="timer">15:00</div>
    </div>
    <div id="quiz"></div>
    <div id="result"></div>
    <button id="restart" onclick="startQuiz()">üîÑ Red√©marrer</button>
</div>

<script>
const PIN_CORRECT="7183";
let tentatives=0;

/* ===== Questions ===== */
const questions=[
 {q:"La cybers√©curit√© prot√®ge uniquement les donn√©es personnelles.",a:false},
 {q:"Le 2FA renforce la s√©curit√©.",a:true},
 {q:"Un ransomware chiffre les donn√©es.",a:true},
 {q:"Le phishing exploite la psychologie humaine.",a:true},
 {q:"Un VPN chiffre le trafic.",a:true},
 {q:"Un pare-feu filtre le trafic r√©seau.",a:true},
 {q:"Les mises √† jour sont inutiles.",a:false},
 {q:"Les APT sont des attaques avanc√©es.",a:true},
 {q:"Le Wi-Fi public est toujours s√ªr.",a:false},
 {q:"Les sauvegardes prot√®gent les donn√©es.",a:true}
];

let current=0, score=0, timeLeft=900, timerInterval;

/* ===== Shuffle ===== */
function shuffleQuestions(array){
    for(let i=array.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [array[i],array[j]]=[array[j],array[i]];
    }
}

/* ===== D√©verrouillage ===== */
function unlock(){
    const pin=document.getElementById("pin").value;
    const msg=document.getElementById("lock-msg");

    if(pin===PIN_CORRECT){
        msg.style.color="#00ff9d";
        msg.textContent="‚úî Acc√®s autoris√©";
        setTimeout(()=>{
            document.getElementById("lock-screen").style.display="none";
            document.getElementById("quiz-screen").style.display="block";
            startQuiz();
        },300);
    }else{
        msg.style.color="#ff4d4d";
        msg.textContent="‚ùåMot de passe incorrect";
    }
    document.getElementById("pin").value="";
}

/* ===== QCM ===== */
function startQuiz(){
 current=0;
 score=0;
 timeLeft=900;

 shuffleQuestions(questions);

 document.getElementById("result").innerHTML="";
 document.getElementById("restart").style.display="none";
 startTimer();
 showQuestion();
}

function startTimer(){
 clearInterval(timerInterval);
 timerInterval=setInterval(()=>{
   let m=Math.floor(timeLeft/60);
   let s=timeLeft%60;
   document.getElementById("timer").textContent=
     `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
   timeLeft--;
   if(timeLeft<0){ endQuiz(); }
 },1000);
}

function showQuestion(){
 if(current>=questions.length){ endQuiz(); return; }
 document.getElementById("progress").textContent=
   `Question ${current+1} / ${questions.length}`;
 document.getElementById("quiz").innerHTML=`
   <div class="question">${questions[current].q}</div>
   <button class="option" onclick="answer(true,this)">Vrai</button>
   <button class="option" onclick="answer(false,this)">Faux</button>
 `;
}

function answer(val,btn){
 let correct=questions[current].a;
 if(val===correct){ btn.classList.add("correct"); score++; }
 else{ btn.classList.add("wrong"); }
 document.querySelectorAll(".option").forEach(b=>b.disabled=true);
 setTimeout(()=>{ current++; showQuestion(); },600);
}

function endQuiz(){
 clearInterval(timerInterval);
 let note=((score/questions.length)*20).toFixed(2);
 document.getElementById("quiz").innerHTML="";
 document.getElementById("progress").textContent="QCM termin√©";
 document.getElementById("result").innerHTML=
   `Score : ${score}/${questions.length}<br>Note : ${note}/20`;
 document.getElementById("restart").style.display="block";
}
</script>

</body>
</html>
