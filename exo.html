<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D√©verrouillage s√©curis√© + QCM</title>
<style>
body{
    margin:0;
    font-family:'Segoe UI',Tahoma,sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
}

/* CENTRAGE DU LOCK SCREEN SEUL */
#lock-screen{
    width:360px;
    padding:40px 30px;
    background:rgba(255,255,255,0.12);
    backdrop-filter:blur(12px);
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,0.4);
    text-align:center;
    color:#fff;

    /* CENTRAGE VERTICAL ET HORIZONTAL */
    position: absolute;
    top:50%;
    left:50%;
    transform: translate(-50%, -50%);
}

#lock-screen img{width:70px;margin-bottom:20px;}
#lock-screen input{width:100%;padding:15px;border-radius:10px;border:none;margin-bottom:20px;font-size:16px;text-align:center;letter-spacing:4px;}
#lock-screen button{width:100%;padding:14px;border:none;border-radius:10px;background:#00c6ff;font-weight:bold;cursor:pointer;}
#lock-msg{margin-top:18px;height:18px;color:#fff;}

/* ===== AUTRES STYLES INCHANG√âS ===== */
header{background:#2563eb;color:white;padding:15px 30px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100;}
header nav a{color:white;margin-left:15px;text-decoration:none;font-weight:500;}
header nav a.active{text-decoration:underline;}
#quiz-screen{display:none;max-width:800px;width:90%;margin:40px auto;background:#fff;padding:30px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,.15);}
h1{text-align:center;color:#2563eb;margin-bottom:10px;}
.top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.timer{font-size:20px;font-weight:bold;color:#0f172a;background:#e0e7ff;padding:8px 16px;border-radius:999px;}
.progress{font-weight:600;color:#475569;}
.question{font-size:22px;font-weight:700;margin-bottom:25px;color:#020617;}
.option{display:block;width:100%;text-align:left;padding:14px 18px;margin:12px 0;font-size:18px;border-radius:10px;border:2px solid #e5e7eb;background:#f8fafc;cursor:pointer;transition:.2s;}
.option:hover{border-color:#2563eb;background:#eef2ff;}
.correct{background:#dcfce7 !important;border-color:#16a34a !important;color:#14532d;}
.wrong{background:#fee2e2 !important;border-color:#dc2626 !important;color:#7f1d1d;}
#result{text-align:center;font-size:24px;font-weight:700;margin-top:20px;}
#restart{display:none;margin:25px auto 0;padding:12px 24px;font-size:18px;border:none;border-radius:999px;background:#2563eb;color:#fff;cursor:pointer;}
#recent-scores{margin-top:20px;font-size:16px;color:#020617;text-align:center;}
</style>
</head>
<body>

<header>
    <nav>
        <a href="index.html">HOMEüë®üèΩ‚Äçüíª</a>
        <a href="cours.html">CYBERüìñ</a>
        <a href="reseau.html">RESEAUüìñ</a>
        <a class="active" href="#">EXAMENüìù</a>
    </nav>
</header>

<div id="lock-screen">
    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png" alt="Lock">
    <h2>D√©verrouillage</h2>
    <input type="password" id="pin" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    <button id="btn" onclick="unlock()">D√©verrouiller</button>
    <div class="msg" id="lock-msg"></div>
</div>

<div id="quiz-screen">
    <h1>QCM Cybers√©curit√©</h1>
    <div class="top-bar">
        <div class="progress" id="progress"></div>
        <div class="timer" id="timer">15:00</div>
    </div>
    <div id="quiz"></div>
    <div id="result"></div>
    <button id="restart" onclick="restartQuiz()">üîÑ Red√©marrer le QCM</button>
    <div id="recent-scores"></div>
</div>

<script>
const PIN_CORRECT="7183";
let tentatives=3, maxTentatives=0;
let essaisScores=[];

function unlock(){
    const pin=document.getElementById("pin").value;
    const msg=document.getElementById("lock-msg");
    const btn=document.getElementById("btn");
    if(pin===PIN_CORRECT){
        msg.style.color="#00ff9d"; msg.textContent="‚úî Acc√®s autoris√©";
        setTimeout(()=>{
            document.getElementById("lock-screen").style.display="none";
            document.getElementById("quiz-screen").style.display="block";
            startQuiz();
        },300);
    } else {
        tentatives++;
        msg.style.color="#ff4d4d";
        msg.textContent=`‚ùåPIN incorrect (${tentatives}/${maxTentatives})`;
        if(tentatives>=maxTentatives){
            msg.textContent="üîí Acc√®s bloqu√© ‚Äì Fin des tentatives";
            btn.disabled=true;
            if(essaisScores.length>0){
                let total = essaisScores.reduce((a,b)=>a+b,0);
                let percent = ((total / (essaisScores.length*20))*100).toFixed(2);
                alert(`R√©sultats totaux des ${essaisScores.length} tentatives : ${total}/100\nPourcentage : ${percent}%`);
            }
        }
    }
    document.getElementById("pin").value="";
}

function relock(reason=""){
    clearInterval(timerInterval);
    document.getElementById("quiz-screen").style.display="none";
    document.getElementById("lock-screen").style.display="block";
    document.getElementById("lock-msg").style.color="#ffcc00";
    document.getElementById("lock-msg").textContent = reason || "üîê Session verrouill√©e";
    document.getElementById("pin").value="";
}

window.addEventListener("beforeunload",()=>{ relock("üîê Vous avez quitt√© la page"); });
document.addEventListener("visibilitychange",()=>{
    if(document.hidden && document.getElementById("quiz-screen").style.display==="block"){
        relock("üîê Changement d‚Äôonglet d√©tect√©");
    }
});

/* ===== 50 QUESTIONS AVEC 3 OPTIONS ===== */
const questions=[
{q:"Quel m√©canisme permet de garantir que les donn√©es n'ont pas √©t√© alt√©r√©es lors d'une transmission ?", 
 o:["Chiffrement sym√©trique","Hashing et int√©grit√© via HMAC","VPN"], a:1},

{q:"Dans le mod√®le Zero Trust, quel principe est appliqu√© ?", 
 o:["Confiance implicite aux appareils internes","V√©rification explicite de tout utilisateur et appareil","Autorisation unique"], a:1},

{q:"Quelle attaque exploite une faille dans la gestion des sessions pour usurper l'identit√© ?", 
 o:["SQL Injection","Session Hijacking","Cross-Site Scripting (XSS)"], a:1},

{q:"Quelle technique de chiffrement est asym√©trique ?", 
 o:["AES-256","RSA","ChaCha20"], a:1},

{q:"Quel protocole s√©curise le courrier √©lectronique avec chiffrement et signature ?", 
 o:["SMTP","SMTPS","PGP"], a:2},

{q:"Dans un r√©seau, quelle attaque consiste √† saturer la table ARP pour rediriger le trafic ?", 
 o:["ARP Spoofing","Man-in-the-Middle","DNS Poisoning"], a:0},

{q:"Quel concept d√©crit l'exploitation d'une vuln√©rabilit√© non encore publi√©e ?", 
 o:["Zero-Day Exploit","Backdoor","Rootkit"], a:0},

{q:"Quelle m√©thode permet d'authentifier un utilisateur sans transmettre de mot de passe en clair ?", 
 o:["OAuth","Kerberos","Brute Force"], a:1},

{q:"Dans la cybers√©curit√© industrielle, Stuxnet ciblait principalement ?", 
 o:["Serveurs web","Syst√®mes SCADA","R√©seaux Wi-Fi publics"], a:1},

{q:"Quel type de malware se cache dans le noyau du syst√®me pour rester ind√©tectable ?", 
 o:["Ransomware","Rootkit","Trojan"], a:1},

{q:"Quel m√©canisme est utilis√© pour √©viter les attaques de type SQL Injection ?", 
 o:["Param√©trage des requ√™tes pr√©par√©es","Antivirus","Cryptage AES"], a:0},

{q:"Quelle attaque consiste √† injecter du code malveillant dans une page web visit√©e par d‚Äôautres utilisateurs ?", 
 o:["XSS r√©fl√©chi","DDoS","ARP Spoofing"], a:0},

{q:"Dans la s√©curit√© des API, quel m√©canisme prot√®ge contre l‚Äôusurpation de requ√™tes ?", 
 o:["OAuth 2.0","FTP","Telnet"], a:0},

{q:"Quel standard est utilis√© pour le chiffrement de bout en bout des messageries instantan√©es ?", 
 o:["TLS 1.2","Signal Protocol","IPSec"], a:1},

{q:"Lors d‚Äôune attaque MITM sur HTTPS, quel certificat est compromis ?", 
 o:["Certificat SSL/TLS l√©gitime","Certificat auto-sign√©","Certificat antivirus"], a:0},

{q:"Quel m√©canisme de s√©curit√© r√©seau permet de d√©tecter et pr√©venir les intrusions en temps r√©el ?", 
 o:["Firewall","IDS/IPS","Proxy HTTP"], a:1},

{q:"Quelle technique est utilis√©e pour isoler les applications dans des conteneurs s√©curis√©s ?", 
 o:["Sandboxing","VPN","Antivirus"], a:0},

{q:"Dans le chiffrement asym√©trique, la cl√© publique sert √† ?", 
 o:["D√©chiffrer les donn√©es","Chiffrer les donn√©es","Signer les emails"], a:1},

{q:"Le principe de d√©fense en profondeur repose sur ?", 
 o:["Utiliser un seul syst√®me de s√©curit√© efficace","Multiplier les couches de s√©curit√©","Se fier aux mots de passe longs uniquement"], a:1},

{q:"Les attaques de type 'Pass-the-Hash' exploitent :", 
 o:["Mot de passe en clair","Hash de mot de passe vol√©","Certificat SSL"], a:1},

{q:"Dans le RGPD, quel droit permet √† un utilisateur de supprimer ses donn√©es personnelles ?", 
 o:["Droit √† la portabilit√©","Droit √† l'effacement (droit √† l'oubli)","Droit de rectification"], a:1},

{q:"Quelle attaque r√©seau consiste √† rediriger le trafic vers un serveur malveillant via DNS ?", 
 o:["DNS Spoofing","ARP Poisoning","Phishing"], a:0},

{q:"Quel protocole permet d‚Äô√©tablir un tunnel s√©curis√© entre deux r√©seaux sur Internet ?", 
 o:["HTTP","VPN","SMTP"], a:1},

{q:"Quel concept d√©crit la protection contre les logiciels malveillants qui se propagent automatiquement sur un r√©seau ?", 
 o:["Antivirus","Segmentation r√©seau","IDS"], a:1},

{q:"Quel type d‚Äôattaque consiste √† saturer la m√©moire ou les ressources d‚Äôun service pour le rendre indisponible ?", 
 o:["Buffer Overflow","DDoS","Man-in-the-Middle"], a:1}
];

let current=0, score=0, timeLeft=900, timerInterval;

function shuffleQuestions(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}}

function saveRecentScore(note){essaisScores.push(note);}
function showRecentScores(){document.getElementById("recent-scores").textContent = essaisScores.length>0?`üíæ Scores tentatives : ${essaisScores.join(" / ")}`:"üíæ Pas encore de scores";}

function startQuiz(){
    current=0; score=0; timeLeft=900;
    shuffleQuestions(questions);
    document.getElementById("result").innerHTML="";
    document.getElementById("restart").style.display="none";
    startTimer();
    showQuestion();
}

function startTimer(){
    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{
        let m=Math.floor(timeLeft/60);
        let s=timeLeft%60;
        document.getElementById("timer").textContent=`${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
        timeLeft--;
        if(timeLeft<0){ relock("‚è± Temps √©coul√© ‚Äì examen termin√©"); }
    },1000);
}

function showQuestion(){
    if(current>=questions.length){ endQuiz(); return; }
    document.getElementById("progress").textContent=`Question ${current+1} / ${questions.length}`;
    let q=questions[current];
    let html=`<div class="question">${q.q}</div>`;
    q.o.forEach((opt,i)=>{html+=`<button class="option" onclick="answer(${i},this)">${opt}</button>`;});
    document.getElementById("quiz").innerHTML=html;
}

function answer(val,btn){
    let correct=questions[current].a;
    if(val===correct){ btn.classList.add("correct"); score++; } else { btn.classList.add("wrong"); }
    document.querySelectorAll(".option").forEach(b=>b.disabled=true);
    setTimeout(()=>{ current++; showQuestion(); },700);
}

function endQuiz(){
    clearInterval(timerInterval);
    let noteSur20 = ((score / questions.length)*20).toFixed(2);
    saveRecentScore(Number(noteSur20));
    showRecentScores();
    document.getElementById("quiz").innerHTML="";
    document.getElementById("progress").textContent="QCM termin√©";
    document.getElementById("result").innerHTML=`üéØ Score : ${score}/${questions.length}<br>üìä Note : ${noteSur20}/20`;
    document.getElementById("restart").style.display="block";
}

function restartQuiz(){ relock("üîê Veuillez entrer le PIN pour recommencer"); }

showRecentScores();
</script>
</body>
</html>
