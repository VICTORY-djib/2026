<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Exercices - Connexion Google</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-auth-compat.js"></script>
</head>
<body>

<header>
    <div class="logo">ZAGA</div>
    <nav>
        <a href="index.html">HOME</a>
        <a href="cours.html">COURS</a>
        <a class="active" href="exo.html">EXO</a>
        <a href="test.html">TEST</a>
    </nav>
</header>

<main style="text-align:center; padding:50px;">
    <h1>Connexion requise pour accÃ©der aux exercices</h1>

    <!-- ðŸ”¹ Bouton Gmail -->
    <button id="login-google" style="padding:15px 30px; font-size:16px; cursor:pointer; background-color:#4285F4; color:white; border:none; border-radius:5px;">
        Se connecter avec Gmail
    </button>

    <!-- ðŸ”¹ Informations utilisateur aprÃ¨s connexion -->
    <div id="user-info" style="display:none; margin-top:30px;">
        <h2>Bienvenue, <span id="user-name"></span> !</h2>
        <p>Vous pouvez maintenant accÃ©der aux exercices :</p>

        <!-- Exemple d'exercices sÃ©curisÃ©s -->
        <ul>
            <li><a href="exo1.html">Exercice 1</a></li>
            <li><a href="exo2.html">Exercice 2</a></li>
            <li><a href="exo3.html">Exercice 3</a></li>
        </ul>
    </div>
</main>

<footer style="text-align:center; padding:20px;">
    <p>Â© 2026 â€“ ZAGA Cyber Security</p>
</footer>

<script>
  // ðŸ”¹ Configuration Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDes-9_eYhdjO6Wiyoduz5SwafamCikI98",
    authDomain: "zaga-service.firebaseapp.com",
    projectId: "zaga-service",
    storageBucket: "zaga-service.firebasestorage.app",
    messagingSenderId: "551000044060",
    appId: "1:551000044060:web:2249d96c14ac7c8c82a5d9",
    measurementId: "G-JRNWSJDJVM"
  };

  // ðŸ”¹ Initialisation Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const loginBtn = document.getElementById('login-google');
  const userInfo = document.getElementById('user-info');
  const userName = document.getElementById('user-name');

  // ðŸ”¹ Connexion Google
  loginBtn.addEventListener('click', () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
          .then((result) => {
              const user = result.user;
              userName.textContent = user.displayName;
              loginBtn.style.display = 'none';
              userInfo.style.display = 'block';

              // ðŸ”¹ Rediriger vers exo.html aprÃ¨s connexion (optionnel)
              // window.location.href = "exo.html"; // pas nÃ©cessaire si dÃ©jÃ  sur cette page
          })
          .catch((error) => {
              alert('Erreur de connexion : ' + error.message);
          });
  });

  // ðŸ”¹ VÃ©rifier si l'utilisateur est dÃ©jÃ  connectÃ©
  auth.onAuthStateChanged((user) => {
      if(user){
          loginBtn.style.display = 'none';
          userInfo.style.display = 'block';
          userName.textContent = user.displayName;
      } else {
          loginBtn.style.display = 'block';
          userInfo.style.display = 'none';
      }
  });
</script>

</body>
</html>
