<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EVALUATION.COM</title>
<style>
body{
    margin:0;
    font-family:'Segoe UI',Tahoma,sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
}
/* CENTRAGE DU LOCK SCREEN */
#lock-screen{
    width:360px;
    padding:40px 30px;
    background:rgba(255,255,255,0.12);
    backdrop-filter:blur(12px);
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,0.4);
    text-align:center;
    color:#fff;
    position: absolute;
    top:50%;
    left:50%;
    transform: translate(-50%, -50%);
}
#lock-screen img{width:70px;margin-bottom:20px;}
#lock-screen input{width:100%;padding:15px;border-radius:10px;border:none;margin-bottom:20px;font-size:16px;text-align:center;letter-spacing:4px;}
#lock-screen button{width:100%;padding:14px;border:none;border-radius:10px;background:#00c6ff;font-weight:bold;cursor:pointer;}
#lock-msg{margin-top:18px;height:18px;color:#fff;}

/* HEADER FLOTTANT TRANSPARENT */
header{
    position:fixed;
    top:10px;
    left:50%;
    transform:translateX(-50%);
    background:rgba(37, 99, 235, 0.75);   /* transparence */
    backdrop-filter: blur(14px);
    padding:12px 24px;
    border-radius:40px;
    border:1px solid rgba(255,255,255,0.25);
    box-shadow:0 8px 25px rgba(0,0,0,0.25);
    z-index:1000;
    transition:all 0.3s ease;
}

/* NAV */
header nav{
    display:flex;
    align-items:center;
    gap:12px;
}

/* LIENS */
header nav a{
    color:white;
    text-decoration:none;
    padding:10px 18px;
    border-radius:25px;
    font-weight:600;
    letter-spacing:0.4px;
    transition:all 0.3s ease;
}

/* SURVOL */
header nav a:hover{
    background:rgba(255,255,255,0.25);
    transform:translateY(-2px);
}

/* LIEN ACTIF */
header nav a.active{
    background:white;
    color:#2563eb;
    box-shadow:0 4px 12px rgba(0,0,0,0.2);
}

/* HERO */
.hero{
    height:300px;
    background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)), url("hacker.png.PNG") center/cover no-repeat;
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    text-align:center;
}
.hero h1{
    font-size:40px;
}

/* CONTENU PAGE */
main{
    max-width:1200px;
    margin:110px auto 40px;
    padding:25px 20px;
    background:white;
    border-radius:12px;
    box-shadow:0 6px 20px rgba(0,0,0,0.1);
}

/* MODULES */
.module{
    background:#e0e7ff;
    padding:30px;
    margin-bottom:45px;
    border-left:6px solid #2563eb;
    border-radius:6px;
}
.module h2{
    color:#1e3a8a;
    margin-bottom:15px;
}
.module p{
    margin-bottom:15px;
    text-align:justify;
}

/* QCM */
.qcm{
    background:linear-gradient(180deg,#1e3a8a,#0f2557);
    border:2px solid rgba(255,255,255,0.25);
    border-radius:14px;
    padding:20px;
    color:white;
    box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.15);
}
.qcm h3{
    margin-bottom:10px;
}
.qcm label{
    display:block;
    margin:8px 0;
}
.qcm button{
    margin-top:10px;
    padding:8px 16px;
    background:#2563eb;
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
    transition:all 0.3s ease;
}
.qcm button:hover{
    background:#1e3a8a;
    transform:translateY(-2px);
}
.result{
    margin-top:10px;
    font-weight:bold;
}
.correct{
    color:darkgreen;
}
.wrong{
    color:darkred;
}

/* FOOTER */
footer{
    background:#2563eb;
    color:white;
    text-align:center;
    padding:20px;
    margin-top:40px;
}
header{background:#2563eb;color:white;padding:15px 30px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100;}
header nav a{color:white;margin-left:15px;text-decoration:none;font-weight:500;}
header nav a.active{text-decoration:underline;}
#quiz-screen{display:none;max-width:800px;width:90%;margin:40px auto;background:#fff;padding:30px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,.15);}
h1{text-align:center;color:#2563eb;margin-bottom:10px;}
.top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.timer{font-size:20px;font-weight:bold;color:#0f172a;background:#e0e7ff;padding:8px 16px;border-radius:999px;}
.progress{font-weight:600;color:#475569;}
.question{font-size:22px;font-weight:700;margin-bottom:25px;color:#020617;}
.option{display:block;width:100%;text-align:left;padding:14px 18px;margin:12px 0;font-size:18px;border-radius:10px;border:2px solid #e5e7eb;background:#f8fafc;cursor:pointer;transition:.2s;}
.option:hover{border-color:#2563eb;background:#eef2ff;}
.correct{background:#dcfce7 !important;border-color:#16a34a !important;color:#14532d;}
.wrong{background:#fee2e2 !important;border-color:#dc2626 !important;color:#7f1d1d;}
#result{text-align:center;font-size:24px;font-weight:700;margin-top:20px;}
#restart{display:none;margin:25px auto 0;padding:12px 24px;font-size:18px;border:none;border-radius:999px;background:#2563eb;color:#fff;cursor:pointer;}
#recent-scores{margin-top:20px;font-size:16px;color:#020617;text-align:center;}
</style>
</head>
<body>

<header>
    <nav>
        <a href="index.html">homeüë®üèΩ‚Äçüíª</a>
        <a href="cours.html">Cyber-S√©curit√©üìñ</a>
        <a href="reseau.html">reseau-informatiqueüìñ</a>
        <a class="active" href="#">Evaluation1üìù</a>
    </nav>
</header>

<div id="lock-screen">
    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png" alt="Lock">
    <h2>D√©verrouillage</h2>
    <input type="password" id="pin" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    <button id="btn" onclick="unlock()">D√©verrouiller</button>

<script>
function unlock(){
    alert("D√©verrouill√© !");
}

// D√©clenchement avec la touche Entr√©e
document.addEventListener("keydown", function(event){
    if(event.key === "Enter"){
        unlock();
    }
});
</script>
    <div class="msg" id="lock-msg"></div>
</div>

<div id="quiz-screen" style="display:none;">
    <h1>QCM Cybers√©curit√©</h1>
    <div class="top-bar">
        <div class="progress" id="progress"></div>
        <div class="timer" id="timer">15:00</div>
    </div>
    <div id="quiz"></div>
    <div id="result"></div>
    <button id="restart" onclick="restartQuiz()">üîÑ Red√©marrer le QCM</button>
    <div id="recent-scores"></div>
</div>

<script>
const PIN_CORRECT = "2026";
const PUK_CORRECT = "253";
const MAX_TENTATIVES = 3;

let tentatives = 0;
let etape = "PIN"; // PIN | PUK

function unlock() {
    const input = document.getElementById("pin");
    const valeur = input.value;
    const msg = document.getElementById("lock-msg");

    if (etape === "PIN") {
        if (valeur === PIN_CORRECT) {
            msg.style.color = "#00ff9d";
            msg.textContent = "‚úî PIN correct, acc√®s autoris√©";

            tentatives = 0;

            setTimeout(() => {
                document.getElementById("lock-screen").style.display = "none";
                document.getElementById("quiz-screen").style.display = "block";
                startQuiz(); // üîì OUVERTURE DE LA PAGE
            }, 300);

        } else {
            tentatives++;
            msg.style.color = "#ff4d4d";
            msg.textContent = `‚ùå PIN incorrect (${tentatives}/${MAX_TENTATIVES})`;
 
            if (tentatives >= MAX_TENTATIVES) {
                etape = "PUK";
                msg.style.color = "#ffcc00";
                msg.textContent = "üîí Trop de tentatives. Entrez le PUK";
                input.placeholder = "Entrer le PUK";
                input.value = "";
            }
        }
    }

    // ===== √âTAPE PUK =====
    else if (etape === "PUK") {
        if (valeur === PUK_CORRECT) {
            etape = "PIN";
            tentatives = 0;
            msg.style.color = "#00c6ff";
            msg.textContent = "üîì PUK correct. Entrez votre PIN";
            input.placeholder = "Entrer le PIN";
            input.value = "";
        } else {
            msg.style.color = "#ff4d4d";
            msg.textContent = "‚ùå PUK incorrect";
        }
    }
}

// ===== Fonction pour verrouiller √† nouveau =====
function relock(reason = "") {
    // clearInterval(timerInterval); // si tu as un timer
    document.getElementById("quiz-screen").style.display = "none";
    document.getElementById("lock-screen").style.display = "block";
    const msg = document.getElementById("lock-msg");
    msg.style.color = "#ffcc00";
    msg.textContent = reason || "üîê Session verrouill√©e";
    document.getElementById("pin").value = "";
}

// ===== D√©tection fermeture onglet / changement de visibilit√© =====
window.addEventListener("beforeunload", () => {
    relock("üîê Vous avez quitt√© la page");
});

document.addEventListener("visibilitychange", () => {
    if (document.hidden && document.getElementById("quiz-screen").style.display === "block") {
        relock("üîê Changement d‚Äôonglet d√©tect√©");
    }
});
document.addEventListener("visibilitychange", () => {
    if (document.hidden && document.getElementById("quiz-screen").style.display === "block") {
        relock("üîê Changement d‚Äôonglet d√©tect√©");
    }
});
/* ===== QCM QUESTIONS ===== */
const questions=[
{q:"Quel m√©canisme permet de garantir que les donn√©es n'ont pas √©t√© alt√©r√©es ?", o:["Chiffrement sym√©trique","Hashing et int√©grit√© via HMAC","VPN"], a:1},
{q:"Dans le mod√®le Zero Trust, quel principe est appliqu√© ?", o:["Confiance implicite aux appareils internes","V√©rification explicite de tout utilisateur et appareil","Autorisation unique"], a:1},
{q:"Quelle attaque exploite une faille dans la gestion des sessions ?", o:["SQL Injection","Session Hijacking","XSS"], a:1},
{q:"Quelle technique de chiffrement est asym√©trique ?", o:["AES-256","RSA","ChaCha20"], a:1},
{q:"Quel protocole s√©curise le courrier √©lectronique ?", o:["SMTP","SMTPS","PGP"], a:2},
{q:"Dans un r√©seau, quelle attaque consiste √† saturer la table ARP ?", o:["ARP Spoofing","MITM","DNS Poisoning"], a:0},
{q:"Quel concept d√©crit l'exploitation d'une vuln√©rabilit√© non encore publi√©e ?", o:["Zero-Day Exploit","Backdoor","Rootkit"], a:0},
{q:"Quelle m√©thode permet d'authentifier un utilisateur sans transmettre de mot de passe ?", o:["OAuth","Kerberos","Brute Force"], a:1},
{q:"Dans la cybers√©curit√© industrielle, Stuxnet ciblait ?", o:["Serveurs web","Syst√®mes SCADA","Wi-Fi publics"], a:1},
{q:"Quel type de malware se cache dans le noyau ?", o:["Ransomware","Rootkit","Trojan"], a:1},
{q:"Quel m√©canisme pour √©viter SQL Injection ?", o:["Requ√™tes pr√©par√©es","Antivirus","AES"], a:0},
{q:"Quelle attaque injecte du code malveillant sur une page web ?", o:["XSS","DDoS","ARP Spoofing"], a:0},
{q:"S√©curit√© des API : protection contre usurpation ?", o:["OAuth 2.0","FTP","Telnet"], a:0},
{q:"Chiffrement bout en bout messageries ?", o:["TLS 1.2","Signal Protocol","IPSec"], a:1},
{q:"MITM sur HTTPS, quel certificat ?", o:["SSL/TLS l√©gitime","Certificat auto-sign√©","Antivirus"], a:0},
{q:"S√©curit√© r√©seau, d√©tection intrusions ?", o:["Firewall","IDS/IPS","Proxy"], a:1},
{q:"Technique pour isoler applications ?", o:["Sandboxing","VPN","Antivirus"], a:0},
{q:"Cl√© publique asym√©trique sert √† ?", o:["D√©chiffrer","Chiffrer","Signer emails"], a:1},
{q:"D√©fense en profondeur repose sur ?", o:["Un seul syst√®me","Multiples couches","Mots de passe longs"], a:1},
{q:"Attaque Pass-the-Hash ?", o:["Mot de passe clair","Hash vol√©","Certificat SSL"], a:1},
{q:"RGPD, droit √† l'effacement ?", o:["Portabilit√©","Droit √† l'oubli","Rectification"], a:1},
{q:"Attaque r√©seau redirigeant trafic via DNS ?", o:["DNS Spoofing","ARP Poisoning","Phishing"], a:0},
{q:"Tunnel s√©curis√© entre r√©seaux ?", o:["HTTP","VPN","SMTP"], a:1},
{q:"Protection contre malwares propag√©s ?", o:["Antivirus","Segmentation","IDS"], a:1},
{q:"Attaque saturant m√©moire ou ressource ?", o:["Buffer Overflow","DDoS","MITM"], a:1},
]

function shuffleOptions() {
    questions.forEach(q => {
        let correctAnswer = q.o[q.a];
        for (let i = q.o.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [q.o[i], q.o[j]] = [q.o[j], q.o[i]];
        }
         q.a = q.o.indexOf(correctAnswer);
    });
}

let current=0, score=0, timeLeft=900, timerInterval;

function shuffleQuestions(array){
    for(let i=array.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [array[i],array[j]]=[array[j],array[i]];
    }
}

function startQuiz(){
    current = 0; score = 0; timeLeft = 900;
    shuffleQuestions(questions);
    shuffleOptions();
    document.getElementById("result").innerHTML="";
    document.getElementById("restart").style.display="none";
    startTimer();
    showQuestion();
}

function startTimer(){
    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{
        let m=Math.floor(timeLeft/60);
        let s=timeLeft%60;
        document.getElementById("timer").textContent=`${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
        timeLeft--;
        if(timeLeft<0){ relock("‚è± Temps √©coul√© ‚Äì examen termin√©"); }
    },1000);
}

function showQuestion(){
    if(current>=questions.length){ endQuiz(); return; }
    document.getElementById("progress").textContent=`Question ${current+1} / ${questions.length}`;
    let q=questions[current];
    let html=`<div class="question">${q.q}</div>`;
    q.o.forEach((opt,i)=>{html+=`<button class="option" onclick="answer(${i},this)">${opt}</button>`;});
    document.getElementById("quiz").innerHTML=html;
}

function answer(val,btn){
    let correct=questions[current].a;
    if(val===correct){ btn.classList.add("correct"); score++; } else { btn.classList.add("wrong"); }
    document.querySelectorAll(".option").forEach(b=>b.disabled=true);
    setTimeout(()=>{ current++; showQuestion(); },700);
}

function endQuiz(){
    clearInterval(timerInterval);
    let noteSur20 = ((score / questions.length)*20).toFixed(2);
    essaisScores.push(Number(noteSur20));
    showRecentScores();

    document.getElementById("quiz").innerHTML = "";
    document.getElementById("result").innerHTML = `üéØ Score : ${score}/${questions.length}<br>üìä Note : ${noteSur20}/20`;

    if(tentativesActuelles < MAX_TENTATIVES){
        // Tentatives 1 √† 3 ‚Üí red√©marrage automatique
        tentativesActuelles++;
        setTimeout(startQuiz,1500);
        document.getElementById("restart").style.display="none";
    } else {
        // 4·µâ tentative ‚Üí affiche r√©sultat et bouton red√©marrer ‚Üí demande PIN
        document.getElementById("restart").style.display="block";
        let total = essaisScores.reduce((a,b)=>a+b,0);
        let percent = ((total / (MAX_TENTATIVES*20))*100).toFixed(2);
        alert(`‚úÖ Fin des ${MAX_TENTATIVES} tentatives !\nTotal : ${total}/100\nPourcentage : ${percent}%`);
    }
}

function restartQuiz(){
    // Apr√®s 4·µâ tentative ‚Üí retour au PIN
    document.getElementById("quiz-screen").style.display="none";
    document.getElementById("lock-screen").style.display="block";
    document.getElementById("lock-msg").style.color="#ffcc00";
    document.getElementById("lock-msg").textContent="üîê Veuillez entrer le PIN pour continuer";
    tentativesActuelles = 0;
    essaisScores = [];
}

function showRecentScores(){
    document.getElementById("recent-scores").textContent =
        essaisScores.length > 0
            ? `üíæ Scores tentatives : ${essaisScores.join(" / ")}`
            : "üíæ Pas encore de scores";
}

showRecentScores();
</script>
</body>
</html>
