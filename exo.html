<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D√©verrouillage s√©curis√© + QCM</title>
<style>
body{margin:0;font-family:'Segoe UI',Tahoma,sans-serif;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);}
header{background:#2563eb;color:white;padding:15px 30px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100;}
header nav a{color:white;margin-left:15px;text-decoration:none;font-weight:500;}
header nav a.active{text-decoration:underline;}
#lock-screen{width:360px;padding:40px 30px;background:rgba(255,255,255,0.12);backdrop-filter:blur(12px);border-radius:18px;box-shadow:0 20px 40px rgba(0,0,0,0.4);text-align:center;color:#fff;margin-top:40px;}
#lock-screen img{width:70px;margin-bottom:20px;}
#lock-screen input{width:100%;padding:15px;border-radius:10px;border:none;margin-bottom:20px;font-size:16px;text-align:center;letter-spacing:4px;}
#lock-screen button{width:100%;padding:14px;border:none;border-radius:10px;background:#00c6ff;font-weight:bold;cursor:pointer;}
#lock-msg{margin-top:18px;height:18px;color:#fff;}
#quiz-screen{display:none;max-width:800px;width:90%;margin:40px auto;background:#fff;padding:30px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,.15);}
h1{text-align:center;color:#2563eb;margin-bottom:10px;}
.top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.timer{font-size:20px;font-weight:bold;color:#0f172a;background:#e0e7ff;padding:8px 16px;border-radius:999px;}
.progress{font-weight:600;color:#475569;}
.question{font-size:22px;font-weight:700;margin-bottom:25px;color:#020617;}
.option{display:block;width:100%;text-align:left;padding:14px 18px;margin:12px 0;font-size:18px;border-radius:10px;border:2px solid #e5e7eb;background:#f8fafc;cursor:pointer;transition:.2s;}
.option:hover{border-color:#2563eb;background:#eef2ff;}
.correct{background:#dcfce7 !important;border-color:#16a34a !important;color:#14532d;}
.wrong{background:#fee2e2 !important;border-color:#dc2626 !important;color:#7f1d1d;}
#result{text-align:center;font-size:24px;font-weight:700;margin-top:20px;}
#restart{display:none;margin:25px auto 0;padding:12px 24px;font-size:18px;border:none;border-radius:999px;background:#2563eb;color:#fff;cursor:pointer;}
#recent-scores{margin-top:20px;font-size:16px;color:#020617;text-align:center;}
</style>
</head>
<body>

<header>
    <nav>
        <a href="#">HOMEüë®üèΩ‚Äçüíª</a>
        <a href="#">COURSüìñ</a>
        <a class="active" href="#">EXAMENüìù</a>
    </nav>
</header>

<div id="lock-screen">
    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png" alt="Lock">
    <h2>D√©verrouillage</h2>
    <input type="password" id="pin" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    <button id="btn" onclick="unlock()">D√©verrouiller</button>
    <div class="msg" id="lock-msg"></div>
</div>

<div id="quiz-screen">
    <h1>QCM Cybers√©curit√©</h1>
    <div class="top-bar">
        <div class="progress" id="progress"></div>
        <div class="timer" id="timer">15:00</div>
    </div>
    <div id="quiz"></div>
    <div id="result"></div>
    <button id="restart" onclick="restartQuiz()">üîÑ Red√©marrer le QCM</button>
    <div id="recent-scores"></div>
</div>

<script>
const PIN_CORRECT="7183";
let tentatives=0, maxTentatives=5;
let essaisScores=[];

function unlock(){
    const pin=document.getElementById("pin").value;
    const msg=document.getElementById("lock-msg");
    const btn=document.getElementById("btn");
    if(pin===PIN_CORRECT){
        msg.style.color="#00ff9d"; msg.textContent="‚úî Acc√®s autoris√©";
        setTimeout(()=>{
            document.getElementById("lock-screen").style.display="none";
            document.getElementById("quiz-screen").style.display="block";
            startQuiz();
        },300);
    } else {
        tentatives++;
        msg.style.color="#ff4d4d";
        msg.textContent=`PIN incorrect (${tentatives}/${maxTentatives})`;
        if(tentatives>=maxTentatives){
            msg.textContent="üîí Acc√®s bloqu√© ‚Äì Fin des tentatives";
            btn.disabled=true;
            if(essaisScores.length>0){
                let total = essaisScores.reduce((a,b)=>a+b,0);
                let percent = ((total / (essaisScores.length*20))*100).toFixed(2);
                alert(`R√©sultats totaux des ${essaisScores.length} tentatives : ${total}/100\nPourcentage : ${percent}%`);
            }
        }
    }
    document.getElementById("pin").value="";
}

function relock(reason=""){
    clearInterval(timerInterval);
    document.getElementById("quiz-screen").style.display="none";
    document.getElementById("lock-screen").style.display="block";
    document.getElementById("lock-msg").style.color="#ffcc00";
    document.getElementById("lock-msg").textContent = reason || "üîê Session verrouill√©e";
    document.getElementById("pin").value="";
}

window.addEventListener("beforeunload",()=>{ relock("üîê Vous avez quitt√© la page"); });
document.addEventListener("visibilitychange",()=>{
    if(document.hidden && document.getElementById("quiz-screen").style.display==="block"){
        relock("üîê Changement d‚Äôonglet d√©tect√©");
    }
});

/* ===== 50 QUESTIONS AVEC 3 OPTIONS ===== */
const questions=[
{q:"1. La cybers√©curit√© prot√®ge quoi principalement ?", o:["Emails uniquement","Donn√©es personnelles","Tous syst√®mes et donn√©es"], a:2},
{q:"2. Les niveaux de protection incluent ?", o:["Personnel","Professionnel","Tous les pr√©c√©dents"], a:2},
{q:"3. L'usurpation d'identit√© est ?", o:["Vol de documents","Vol d'identit√©","Virus"], a:1},
{q:"4. Le Cube de McCumber inclut ?", o:["Confidentialit√©, int√©grit√© et disponibilit√©","Phishing","Antivirus"], a:0},
{q:"5. Un ransomware fait quoi ?", o:["Efface fichiers","Chiffre fichiers","Change mot de passe"], a:1},
{q:"6. Stuxnet est un malware utilis√© pour ?", o:["Espionnage","Destruction industrielle","Phishing"], a:1},
{q:"7. Le phishing vise √† ?", o:["Voler des informations","Augmenter vitesse internet","Bloquer un programme"], a:0},
{q:"8. Le MFA signifie ?", o:["Multi Factor Authentication","Mainframe Access","Malware Free"], a:0},
{q:"9. OAuth sert √† ?", o:["Partager mot de passe","Authentification s√©curis√©e","Virus"], a:1},
{q:"10. CEH concerne ?", o:["Hacking ill√©gal","Hacking √©thique","Hacking r√©seau"], a:1},
{q:"11. CISSP exige environ ?", o:["1 an exp√©rience","5 ans exp√©rience","10 ans exp√©rience"], a:1},
{q:"12. VPN cr√©e ?", o:["Tunnel chiffr√©","Serveur DNS","Antivirus"], a:0},
{q:"13. Un botnet est ?", o:["Programme antivirus","R√©seau d'appareils infect√©s","Logiciel l√©gal"], a:1},
{q:"14. Une attaque DDoS provient de ?", o:["Une seule machine","Un r√©seau d'ordinateurs","Email"], a:1},
{q:"15. Spyware et Adware peuvent ?", o:["Coexister","S'exclure mutuellement","Effacer fichiers"], a:0},
{q:"16. La segmentation r√©seau sert √† ?", o:["Limiter propagation attaques","Augmenter vitesse","Bloquer antivirus"], a:0},
{q:"17. Les logs r√©seau aident √† ?", o:["√âteindre serveur","D√©tecter attaques","Ignorer malwares"], a:1},
{q:"18. Le cryptojacking fait quoi ?", o:["Mine cryptomonnaies sans consentement","Efface donn√©es","Spyware"], a:0},
{q:"19. L'ing√©nierie sociale exploite ?", o:["Psychologie humaine","Virus","Hardware"], a:0},
{q:"20. Une attaque MITM signifie ?", o:["Interception communication","Suppression fichiers","Cr√©ation VPN"], a:0},
{q:"21. Les mises √† jour sont ?", o:["Utile","Inutiles","Dangereuses"], a:0},
{q:"22. Un rootkit est ?", o:["Facile √† d√©tecter","Difficile √† d√©tecter","Supprime antivirus"], a:1},
{q:"23. Le Wi-Fi public sans VPN est ?", o:["S√©curis√©","Non s√©curis√©","Prot√©g√© par antivirus"], a:1},
{q:"24. Le phishing vocal s'appelle ?", o:["Vishing","Spear phishing","SMS phishing"], a:0},
{q:"25. Les certificats SSL/TLS servent √† ?", o:["S√©curiser site web","Augmenter vitesse","Bloquer email"], a:0},
{q:"26. Le 2FA signifie ?", o:["Double facteur authentification","Antivirus double","VPN s√©curis√©"], a:0},
{q:"27. Les sauvegardes cloud sont ?", o:["Toujours crypt√©es","Parfois crypt√©es","Jamais crypt√©es"], a:1},
{q:"28. Le Social Engineering concerne ?", o:["Emails uniquement","Toutes interactions","R√©seaux sociaux seulement"], a:1},
{q:"29. Les APT sont ?", o:["Attaques simples","Attaques avanc√©es","Antivirus"], a:1},
{q:"30. Les honeypots servent √† ?", o:["Leurre pour hackers","Cr√©er virus","Effacer donn√©es"], a:0},
{q:"31. Le ransomware peut ?", o:["Chiffrer fichiers","Effacer fichiers","Augmenter vitesse"], a:0},
{q:"32. Une attaque DDoS est ?", o:["DoS unique","Distribu√©e","Antivirus"], a:1},
{q:"33. Le rootkit permet ?", o:["Contr√¥le syst√®me cach√©","S√©curit√© totale","Bloquer malware"], a:0},
{q:"34. Un antivirus bloque ?", o:["Tous malwares","Certains malwares","Rien"], a:1},
{q:"35. Les scripts kiddies ont ?", o:["Peu de comp√©tences","Beaucoup de comp√©tences","Aucune comp√©tence"], a:0},
{q:"36. La sensibilisation du personnel r√©duit ?", o:["Les risques","La vitesse internet","Les logs"], a:0},
{q:"37. OAuth permet ?", o:["S√©curit√© mot de passe","Partager mot de passe","Bloquer virus"], a:0},
{q:"38. CEH signifie ?", o:["Certified Ethical Hacker","Cyber Expert Hacking","Certified Enterprise Hacker"], a:0},
{q:"39. CISSP est ?", o:["Certification cyber","Antivirus","VPN"], a:0},
{q:"40. Le MFA est ?", o:["Plus s√ªr qu'un mot de passe seul","Inutile","Virus"], a:0},
{q:"41. Les certificats SSL/TLS s√©curisent ?", o:["Sites web","Emails uniquement","VPN"], a:0},
{q:"42. Le spear-phishing cible ?", o:["Individus pr√©cis","Tout le monde","Serveurs"], a:0},
{q:"43. La conformit√© RGPD prot√®ge ?", o:["Vie priv√©e","Serveur","Emails"], a:0},
{q:"44. L'authentification biom√©trique ?", o:["Peut remplacer mot de passe","Toujours s√ªre","Inutile"], a:0},
{q:"45. La navigation priv√©e rend ?", o:["Totalement anonyme","Partiellement anonyme","Aucune anonymit√©"], a:1},
{q:"46. IDS d√©tecte ?", o:["Intrusions en temps r√©el","Virus","Mots de passe"], a:0},
{q:"47. La gestion des risques inclut ?", o:["Identification et r√©ponse","Ignorer attaques","Supprimer virus"], a:0},
{q:"48. La r√©ponse aux incidents inclut ?", o:["Communication","Effacer donn√©es","Bloquer emails"], a:0},
{q:"49. Une seule couche de s√©curit√© suffit ?", o:["Oui","Non","Parfois"], a:1},
{q:"50. La cybers√©curit√© doit ?", o:["√âvoluer constamment","Rester statique","Supprimer antivirus"], a:0}
];

let current=0, score=0, timeLeft=900, timerInterval;

function shuffleQuestions(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}}

function saveRecentScore(note){essaisScores.push(note);}
function showRecentScores(){document.getElementById("recent-scores").textContent = essaisScores.length>0?`üíæ Scores tentatives : ${essaisScores.join(" / ")}`:"üíæ Pas encore de scores";}

function startQuiz(){
    current=0; score=0; timeLeft=900;
    shuffleQuestions(questions);
    document.getElementById("result").innerHTML="";
    document.getElementById("restart").style.display="none";
    startTimer();
    showQuestion();
}

function startTimer(){
    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{
        let m=Math.floor(timeLeft/60);
        let s=timeLeft%60;
        document.getElementById("timer").textContent=`${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
        timeLeft--;
        if(timeLeft<0){ relock("‚è± Temps √©coul√© ‚Äì examen termin√©"); }
    },1000);
}

function showQuestion(){
    if(current>=questions.length){ endQuiz(); return; }
    document.getElementById("progress").textContent=`Question ${current+1} / ${questions.length}`;
    let q=questions[current];
    let html=`<div class="question">${q.q}</div>`;
    q.o.forEach((opt,i)=>{html+=`<button class="option" onclick="answer(${i},this)">${opt}</button>`;});
    document.getElementById("quiz").innerHTML=html;
}

function answer(val,btn){
    let correct=questions[current].a;
    if(val===correct){ btn.classList.add("correct"); score++; } else { btn.classList.add("wrong"); }
    document.querySelectorAll(".option").forEach(b=>b.disabled=true);
    setTimeout(()=>{ current++; showQuestion(); },700);
}

function endQuiz(){
    clearInterval(timerInterval);
    let noteSur20 = ((score / questions.length)*20).toFixed(2);
    saveRecentScore(Number(noteSur20));
    showRecentScores();
    document.getElementById("quiz").innerHTML="";
    document.getElementById("progress").textContent="QCM termin√©";
    document.getElementById("result").innerHTML=`üéØ Score : ${score}/${questions.length}<br>üìä Note : ${noteSur20}/20`;
    document.getElementById("restart").style.display="block";
}

function restartQuiz(){ relock("üîê Veuillez entrer le PIN pour recommencer"); }

showRecentScores();
</script>
</body>
</html>
